{% extends 'base.html' %}
{% block content %}
<div class="grid">
  <div class="card">
    <h2>Login</h2>
    <p class="kicker">Welcome back. Sign in to continue.</p>
    <div id="login-alert"></div>
    <form class="form" id="login-form" onsubmit="return false;">
      <label class="label">Email</label>
      <input class="input" id="login-email" type="email" placeholder="you@example.com" />
      <label class="label">Password</label>
      <input class="input" id="login-password" type="password" placeholder="••••••••" />
      <button class="btn-primary" id="login-btn">Sign In</button>
    </form>
  </div>
  <div class="card">
    <h2>New here?</h2>
    <p class="kicker">Create your account to start your application.</p>
    <a class="btn-secondary" href="/register">Create Account</a>
  </div>
</div>
{% endblock %}
{% block scripts %}
<script>
  byId('login-btn').addEventListener('click', async ()=>{
    const email = byId('login-email').value.trim();
    const password = byId('login-password').value;
    const res = await postJSON('/api/auth/login', {email, password});
    const alert = byId('login-alert');
    if(res.ok){ alert.innerHTML='<div class="alert success">Logged in</div>'; setTimeout(()=>location.href='/user-dashboard', 600); }
    else{ alert.innerHTML='<div class="alert error">'+(res.data.error||'Login failed')+'</div>'; }
  });
</script>
{% endblock %}
